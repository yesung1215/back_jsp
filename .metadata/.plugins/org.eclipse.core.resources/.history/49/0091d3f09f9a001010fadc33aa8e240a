<%@page import="com.app.vo.ProductVO"%>
<%@page import="java.util.Optional"%>
<%@page import="org.apache.catalina.connector.Request"%>
<%@page import="com.app.dao.ProductDAO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>상품 수정</title>
</head>
<body>

	<%
	p

			Long id = Long.parseLong(request.getParameter("id"));
			PostDAO productDAO = new PostDAO();
			Optional<ProductVO> foundProduct = productDAO.select(id);
			if(foundProduct.isPresent()){
		ProductVO product = foundProduct.get();
	%>
	<form action="/myBatis/update">
		<input type="hidden" name='id'  type="hidden" value="<%=product.getId() %>" />
		<div>
			<span>상품명</span><input name='productName' value="<%=product.getProductName() %>" />
		</div>
		<div>
			<span>가격</span><input name='productPrice' value="<%=product.getProductPrice() %>" />
		</div>
		<div>
			<span>재고</span><input name='productStock' value="<%=product.getProductStock() %>" />
		</div>
		<button>상품 수정</button>
	</form>
	<%
		}
	%>
</body>
<script type="text/javascript">
	const inputs = document.querySelectorAll('input');
	const button = document.querySelector('button')
	const form = document.querySelector('form')
	
	console.log(inputs)
	button.addEventListener("click", (e) => {
		for(let input of inputs){
			if(input.name === "productName"){
				if(!input.value){
					alert(input.name + "값이 없습니다.")
					return;
				}
			}
		}	
		form.submit()
	})
</script>
</html>






